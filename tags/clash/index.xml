<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Clash on 小类随手记</title><link>https://dev.leiyanhui.com/tags/clash/</link><description>Recent content in Clash on 小类随手记</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 07 Sep 2022 19:56:11 +0000</lastBuildDate><atom:link href="https://dev.leiyanhui.com/tags/clash/index.xml" rel="self" type="application/rss+xml"/><item><title>unraid部署clash和可视化界面</title><link>https://dev.leiyanhui.com/c/unraid-clash/</link><pubDate>Wed, 07 Sep 2022 19:56:11 +0000</pubDate><guid>https://dev.leiyanhui.com/c/unraid-clash/</guid><description>&lt;h1 id="unraid部署clash和可视化界面"&gt;unraid部署clash和可视化界面
&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;建议用 v2rayA 更简单 &lt;a class="link" href="https://dev.leiyanhui.com/linux/docker-proxy/" target="_blank" rel="noopener"
&gt;https://dev.leiyanhui.com/linux/docker-proxy/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;先安装可视化界面&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker pull haishanh/yacd
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker run -p 1234:80 -d haishanh/yacd
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;#1234端口是你访问clash可视化界面的端口
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;改一下
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker run --name clashx -p 1234:80 --restart=always -d haishanh/yacd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;打开 http://unraidip:1234 可以访问了，但是不可以操作 有提示要添加一个9090的服务，先不管，我们继续&lt;/p&gt;
&lt;p&gt;去拿到 config.yaml 这个文件自己想办法。自己想办法解决节点问题。如果是机场有支持windows clash x的，订阅到windows后 本地会有这个文件 。这玩意收费的，不可能白嫖的。如果你没有地方买，可以找我拿邀请链接，会送你我一点流量。&lt;/p&gt;
&lt;p&gt;把文件放到 /mnt/disk1/appdata/clash/config.yaml&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;C:\Users\你的用户名\.config\clash\profiles
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;注意 是在 profiles 目录
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;继续安装docker&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker pull dreamacro/clash
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;docker run --name clash -d -v /mnt/disk1/appdata/clash/config.yaml:/root/.config/clash/config.yaml --privileged -p 7890:7890 -p 9090:9090 dreamacro/clash
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;然后发现 yacd 一直连不上 这边，最后改为host模式 就可以了。&lt;/p&gt;
&lt;h3 id="unriad启用http代理"&gt;unriad启用http代理
&lt;/h3&gt;&lt;p&gt;修改&lt;a class="link" href="https://www.smzdm.com/fenlei/youpan/" target="_blank" rel="noopener"
&gt;U盘&lt;/a&gt;config目录下的go文件，增加如下代码，&lt;strong&gt;注意 加粗部分修改为你自己的IP和端口&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;http_proxy=&lt;strong&gt;http://192.168.1.2:7890&lt;/strong&gt; https_proxy=&lt;strong&gt;http://192.168.1.2:7890&lt;/strong&gt; /usr/local/sbin/emhttp &amp;amp;&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;export http_proxy=&amp;rdquo;&lt;strong&gt;http://192.168.1.2:7890&lt;/strong&gt;&amp;quot;&amp;quot; &amp;raquo; /root/.bash_profile&lt;/p&gt;
&lt;p&gt;echo &amp;ldquo;export https_proxy=&amp;rdquo;&lt;strong&gt;http://192.168.1.2:7890&lt;/strong&gt;&amp;quot;&amp;quot; &amp;raquo; /root/.bash_profile&lt;/p&gt;
&lt;p&gt;修改U盘/config/plugins/community.applications目录下的proxy.cfg文件（没有的话自己手动创建）&lt;/p&gt;
&lt;p&gt;同样注意加粗部分修改成自己的&lt;/p&gt;
&lt;p&gt;port=&lt;strong&gt;7890&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;tunnel=2&lt;/p&gt;
&lt;p&gt;proxy=&lt;strong&gt;http://192.168.1.2&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;proxy=&lt;strong&gt;socks5://192.168.1.2&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面给一个config.yaml 的范本&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mixed-port: 7890 #必须
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;allow-lan: true #必须的
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;bind-address: &amp;#39;*&amp;#39; #必须
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mode: rule #必须
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;log-level: silent #必须
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;external-controller: &amp;#39;:9090&amp;#39; #必须
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dns:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; enable: true
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ipv6: false
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; default-nameserver: [223.5.5.5, 119.29.29.29]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; enhanced-mode: redir-host
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; fake-ip-range: 198.18.0.1/16
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; use-hosts: true
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; nameserver: [&amp;#39;https://doh.pub/dns-query&amp;#39;, &amp;#39;https://dns.alidns.com/dns-query&amp;#39;]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; fallback: [&amp;#39;https://doh.dns.sb/dns-query&amp;#39;, &amp;#39;https://dns.cloudflare.com/dns-query&amp;#39;, &amp;#39;https://dns.twnic.tw/dns-query&amp;#39;, &amp;#39;tls://8.8.4.4:853&amp;#39;]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; fallback-filter: { geoip: true, ipcidr: [240.0.0.0/4, 0.0.0.0/32] }
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;proxies:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - 更多内容 参考后
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item></channel></rss>