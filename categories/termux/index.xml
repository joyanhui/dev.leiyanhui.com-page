<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Termux on 小类随手记</title><link>https://dev.leiyanhui.com/categories/termux/</link><description>Recent content in Termux on 小类随手记</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sat, 17 Jun 2023 22:14:20 +0800</lastBuildDate><atom:link href="https://dev.leiyanhui.com/categories/termux/index.xml" rel="self" type="application/rss+xml"/><item><title>安卓运行lxc/docker方法（非虚拟机）</title><link>https://dev.leiyanhui.com/linux/android-linux/</link><pubDate>Sat, 17 Jun 2023 22:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/linux/android-linux/</guid><description>&lt;p&gt;注意，必须root.没有root权限 无解。&lt;br&gt;
你需要会用&lt;/p&gt;
&lt;h3 id="准备工作"&gt;准备工作
&lt;/h3&gt;&lt;p&gt;1 MT管理器 &lt;a class="link" href="https://www.coolapk.com/apk/bin.mt.plus" target="_blank" rel="noopener"
&gt;https://www.coolapk.com/apk/bin.mt.plus&lt;/a&gt;
2 下载 秋秋 静态编译的 lxc文件，
原下载地址 (下载后不用改名)
点这里
备用地址 (下载以后把后缀名.zip 删掉)
点这里&lt;/p&gt;
&lt;h3 id="解压lxc"&gt;解压lxc
&lt;/h3&gt;&lt;p&gt;用mt管理器把静态编译的lxc压缩包 lxcnew.tar.gz文件复制到/data/lxc&lt;br&gt;
打开mt管理器，点左上角 三条杠，
终端模拟器，如果是第一次使用，
等它初始化一下。
开始执行命令 解压 ,记得手机访问本网页，你可以直接复制代码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;su
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; /data/lxc
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;tar -xvf lxcnew.tar.gz
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="检测cgroup版本"&gt;检测cgroup版本
&lt;/h3&gt;&lt;p&gt;分别执行以下命令&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mount &lt;span class="p"&gt;|&lt;/span&gt; grep cgroup2
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mount &lt;span class="p"&gt;|&lt;/span&gt; grep cgroup1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果第 1 条命令有输出信息，你就是cgroup2&lt;br&gt;
如果第 2 条命令有输出信息，你就是cgroup1&lt;br&gt;
如果你是cgroup2版本，执行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;lxc.init.cmd = /sbin/init systemd.unified_cgroup_hierarchy&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt;&lt;span class="p"&gt;;&lt;/span&gt; /data/lxc/share/lxc/config/common.conf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果你是cgroup2版本，执行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;lxc.init.cmd = /sbin/init systemd.unified_cgroup_hierarchy=0&amp;#34;&lt;/span&gt; &amp;gt;&amp;gt; /data/lxc/share/lxc/config/common.conf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="配置一下lxc的网络"&gt;配置一下lxc的网络
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sed -i &lt;span class="s1"&gt;&amp;#39;s/lxc\.net\.0\.type = empty/lxc.net.0.type = none/g&amp;#39;&lt;/span&gt; /data/lxc/etc/lxc/default.conf
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="挂载cgroup"&gt;挂载cgroup
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mount -t tmpfs -o &lt;span class="nv"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;755&lt;/span&gt; tmpfs /sys/fs/cgroup
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p /sys/fs/cgroup/devices
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir -p /sys/fs/cgroup/systemd
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mount -t cgroup cgroup -o none,name&lt;span class="o"&gt;=&lt;/span&gt;systemd /sys/fs/cgroup/systemd
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;上面5行命令 每次启动都要执行，可以更换termux 处理，写入到.bashrc 的末尾&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bashrc" data-lang="bashrc"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo mount -t tmpfs -o &lt;span class="nv"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;755&lt;/span&gt; tmpfs /sys/fs/cgroup &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mkdir -p /sys/fs/cgroup/devices &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mkdir -p /sys/fs/cgroup/systemd &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mount -t cgroup cgroup -o none,name&lt;span class="o"&gt;=&lt;/span&gt;systemd /sys/fs/cgroup/systemd
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo lxc-setup-cgroups
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;记得 termux 要安装 tsu &lt;code&gt;pkg install tsu&lt;/code&gt; 否则没有sudo命令，同时要给termux root权限，不然sudo 也执行不了&lt;/p&gt;
&lt;h3 id="准备创建lxc"&gt;准备创建lxc
&lt;/h3&gt;&lt;p&gt;后面的命令都在termux里面执行，当然MT的终端 适当修改一下也可以&lt;/p&gt;
&lt;h4 id="下载镜像"&gt;下载镜像
&lt;/h4&gt;&lt;p&gt;我这里选择debian,不喜欢ubuntu&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-gdscript3" data-lang="gdscript3"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lxc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lxc&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt; &lt;span class="n"&gt;download&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="n"&gt;debian&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="n"&gt;mirrors&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tuna&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tsinghua&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;edu&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cn&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lxc&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;images&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;依次输入 debian bookworm arm64&lt;/p&gt;
&lt;h4 id="启动"&gt;启动
&lt;/h4&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo /data/lxc/bin/lxc-start -n debian
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果提示 state &amp;ldquo;ABORTING&amp;rdquo; instead of &amp;ldquo;RUNNING&amp;rdquo;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo /data/lxc/bin/lxc-start -n debian --logfile=tmp.log --logpriority=DEBUG
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo cat tmp.log 检查错误
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo /data/lxc/bin/lxc-attach -n debian /bin/passwd root
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;本文转自： &lt;a class="link" href="https://purpleleaf.top/posts/%E5%AE%89%E5%8D%93lxc%E7%8B%AC%E7%AB%8B%E8%BF%90%E8%A1%8C%E6%95%99%E7%A8%8Bv3/" target="_blank" rel="noopener"
&gt;https://purpleleaf.top/posts/%E5%AE%89%E5%8D%93lxc%E7%8B%AC%E7%AB%8B%E8%BF%90%E8%A1%8C%E6%95%99%E7%A8%8Bv3/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;日期 2023年07月21日
时间 01:44&lt;/p&gt;
&lt;p&gt;by redblue(弗朗西斯科)&lt;/p&gt;
&lt;p&gt;【 一 】 前期准备
( 1 )
mt管理器，进入手机目录/data，
新建 lxc 文件夹&lt;/p&gt;
&lt;p&gt;下载 秋秋 静态编译的 lxc文件，
原下载地址 (下载后不用改名)
点这里
备用地址 (下载以后把后缀名.zip 删掉)
点这里&lt;/p&gt;
&lt;p&gt;然后把 lxcnew.tar.gz文件复制到/data/lxc,
打开mt管理器，点左上角 三条杠，
终端模拟器，如果是第一次使用，
等它初始化一下。
开始执行命令&lt;/p&gt;
&lt;p&gt;$ su
$ cd /data/lxc
$ tar -xvf lxcnew.tar.gz
( 2 ) ——检测cgroup版本
分别执行以下命令&lt;/p&gt;
&lt;p&gt;$ mount | grep cgroup2
$ mount | grep cgroup1
如果第 1 条命令有输出信息，你就是cgroup2
如果第 2 条命令有输出信息，你就是cgroup1&lt;/p&gt;
&lt;p&gt;如果你是cgroup1版本，执行 (执行1次即可，以后每次启动 无需再次执行)&lt;/p&gt;
&lt;p&gt;$ echo &amp;ldquo;lxc.init.cmd = /sbin/init systemd.unified_cgroup_hierarchy&amp;rdquo; &amp;raquo;; /data/lxc/share/lxc/config/common.conf
如果你是cgroup2版本 执行 (执行1次即可，以后每次启动 无需再次执行)&lt;/p&gt;
&lt;p&gt;$ echo &amp;ldquo;lxc.init.cmd = /sbin/init systemd.unified_cgroup_hierarchy=0&amp;rdquo; &amp;raquo; /data/lxc/share/lxc/config/common.conf
( 3 )
网络设置
( cgroup1 和cgroup2都要执行 )
( 共1条命令，只需要执行 1 次 )&lt;/p&gt;
&lt;p&gt;$ sed -i &amp;rsquo;s/lxc.net.0.type = empty/lxc.net.0.type = none/g&amp;rsquo; /data/lxc/etc/lxc/default.conf
( 4 )
挂载cgroup ( 可能需要每次都执行,如果在termux里可以在每个命令前加sudo，放.bashrc里每次自动执行)&lt;/p&gt;
&lt;p&gt;mount -t tmpfs -o mode=755 tmpfs /sys/fs/cgroup &amp;amp;&amp;amp; mkdir -p /sys/fs/cgroup/devices &amp;amp;&amp;amp; mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices &amp;amp;&amp;amp; mkdir -p /sys/fs/cgroup/systemd &amp;amp;&amp;amp; mount -t cgroup cgroup -o none,name=systemd /sys/fs/cgroup/systemd
或者
建议直接去termux里，执行&lt;/p&gt;
&lt;p&gt;$ pkg install root-repo
$ pkg install tsu lxc
$ sudo mount -t tmpfs -o mode=755 tmpfs /sys/fs/cgroup &amp;amp;&amp;amp; sudo mkdir -p /sys/fs/cgroup/devices &amp;amp;&amp;amp; sudo mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices &amp;amp;&amp;amp; sudo mkdir -p /sys/fs/cgroup/systemd &amp;amp;&amp;amp; sudo mount -t cgroup cgroup -o none,name=systemd /sys/fs/cgroup/systemd
$ sudo lxc-setup-cgroups&lt;/p&gt;
&lt;p&gt;【 二 】 创建和启动 lxc容器
接下来，你可以选择自己喜欢的app进行操作，
例如
mt管理器
juicessh
termius
termux
本地adb shell
远程adb&lt;/p&gt;
&lt;p&gt;( 1 ) 配置环境
以mt管理器 为例，
打开mt管理器，点左上角 三条杠，
终端模拟器，如果是第一次使用，
等它初始化一下。
开始执行命令&lt;/p&gt;
&lt;p&gt;$ su
$ cd /data/lxc
$ source env.sh
( 2 ) 创建和运行 lxc容器
创建lxc容器&lt;/p&gt;
&lt;p&gt;$ lxc-create -t download -n ubuntu &amp;ndash; &amp;ndash;server mirrors.tuna.tsinghua.edu.cn/lxc-images
以 ubuntu 23.04 为例,依次输入
ubuntu
lunar
arm64&lt;/p&gt;
&lt;p&gt;等它下载解压完&lt;/p&gt;
&lt;p&gt;启动容器&lt;/p&gt;
&lt;p&gt;lxc-start -n ubuntu
改密码&lt;/p&gt;
&lt;p&gt;lxc-attach -n ubuntu /bin/passwd root
然后输入密码
再次输入密码
密码改好了!&lt;/p&gt;
&lt;p&gt;停止容器&lt;/p&gt;
&lt;p&gt;lxc-stop -n ubuntu
启动并进入容器&lt;/p&gt;
&lt;p&gt;lxc-start -n ubuntu -F
输入用户名 root
输入密码 你改的密码&lt;/p&gt;
&lt;p&gt;执行&lt;/p&gt;
&lt;p&gt;apt update
发现网络有问题，失败&lt;/p&gt;
&lt;p&gt;解决网络问题 ( 共3条命令 )&lt;/p&gt;
&lt;p&gt;$ groupadd -g 3003 aid_inet
$ usermod -g aid_inet _apt
$ echo &amp;ldquo;nameserver 8.8.8.8&amp;rdquo; &amp;gt; /etc/resolv.conf
执行&lt;/p&gt;
&lt;p&gt;apt update
发现成功了&lt;/p&gt;
&lt;p&gt;【 三 】 ubuntu后续使用
( 1 ) 更换为清华大学源 可选
备份原镜像源&lt;/p&gt;
&lt;p&gt;$ cp /etc/apt/sources.list /etc/apt/sources.list.bak
ubuntu 23.04更换清华大学源
共4条命令&lt;/p&gt;
&lt;p&gt;$ echo &amp;ldquo;deb &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/" target="_blank" rel="noopener"
&gt;https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/&lt;/a&gt; lunar main restricted universe multiverse&amp;rdquo; &amp;gt; /etc/apt/sources.list&lt;/p&gt;
&lt;p&gt;$ echo &amp;ldquo;deb &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/" target="_blank" rel="noopener"
&gt;https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/&lt;/a&gt; lunar-updates main restricted universe multiverse&amp;rdquo; &amp;raquo; /etc/apt/sources.list&lt;/p&gt;
&lt;p&gt;$ echo &amp;ldquo;deb &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/" target="_blank" rel="noopener"
&gt;https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/&lt;/a&gt; lunar-backports main restricted universe multiverse&amp;rdquo; &amp;raquo; /etc/apt/sources.list&lt;/p&gt;
&lt;p&gt;$ echo &amp;ldquo;deb &lt;a class="link" href="http://ports.ubuntu.com/ubuntu-ports/" target="_blank" rel="noopener"
&gt;http://ports.ubuntu.com/ubuntu-ports/&lt;/a&gt; lunar-security main restricted universe multiverse&amp;rdquo; &amp;raquo; /etc/apt/sources.list
( 2 ) ssh连接&lt;/p&gt;
&lt;p&gt;$ apt install openssh-server
修改ssh配置文件，允许root用户的ssh连接，&lt;/p&gt;
&lt;p&gt;$ apt install nano
$ nano /etc/ssh/sshd_config
找到这行
#PermitRootLogin prohibit-password
在它的下面添加1行
PermitRootLogin yes&lt;/p&gt;
&lt;p&gt;保存并退出
Ctrl + o
Enter
Ctrl + x&lt;/p&gt;
&lt;p&gt;重启ssh服务&lt;/p&gt;
&lt;p&gt;$ systemctl restart ssh
( 3 ) 改时区 描述: 日期时间不对，需要改下时区&lt;/p&gt;
&lt;p&gt;执行&lt;/p&gt;
&lt;p&gt;date
发现日期时间不对&lt;/p&gt;
&lt;p&gt;执行以下命令 ( 即设定时区 让它自动校正时间 )&lt;/p&gt;
&lt;p&gt;sudo ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
执行&lt;/p&gt;
&lt;p&gt;date
发现时间自动校正了&lt;/p&gt;
&lt;p&gt;【 四 】 lxc里的docker 运行
参考 安卓Lxc教程V9 的以下章节 :
【 六 】lxc里运行docker&lt;/p&gt;
&lt;p&gt;【 五 】 常用命令
这里记录一些常用命令&lt;/p&gt;
&lt;p&gt;( 1 )
lxc容器后台运行&lt;/p&gt;
&lt;p&gt;lxc-start -n ubuntu -d
然后就可以ssh连接了&lt;/p&gt;
&lt;p&gt;( 2 )
停止lxc容器&lt;/p&gt;
&lt;p&gt;lxc-stop -n ubuntu
也可以这样停止容器&lt;/p&gt;
&lt;p&gt;$ su
$ /data/lxc/bin/lxc-stop -n ubuntu
termux里 可以这样停止容器&lt;/p&gt;
&lt;p&gt;sudo /data/lxc/bin/lxc-stop -n ubuntu&lt;/p&gt;</description></item></channel></rss>