<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Forwards on 小类随手记</title><link>https://dev.leiyanhui.com/categories/forwards/</link><description>Recent content in Forwards on 小类随手记</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 06 Jan 2023 15:14:20 +0800</lastBuildDate><atom:link href="https://dev.leiyanhui.com/categories/forwards/index.xml" rel="self" type="application/rss+xml"/><item><title>openwrt端口转发的一个小问题，端口回流的问题</title><link>https://dev.leiyanhui.com/openwrt/forwards-err/</link><pubDate>Fri, 06 Jan 2023 15:14:20 +0800</pubDate><guid>https://dev.leiyanhui.com/openwrt/forwards-err/</guid><description>&lt;p&gt;在使用openwrt的端口转发时候遇到一个小问题，就是 外网可以用 公网IP/域名 + 端口的方式 访问内网。但是内网内不可以这样访问。&lt;/p&gt;
&lt;p&gt;经过电报群里面大佬&lt;code&gt;Gx Hunter&lt;/code&gt;的提醒，检查了一下端口回流。然后查阅其他人文章 发现 是docker导致的端口回流问题。&lt;/p&gt;
&lt;p&gt;简单处理放方法&lt;/p&gt;
&lt;p&gt;&lt;code&gt;vi /etc/sysctl.d/11-br-netfilter.conf&lt;/code&gt; 检查和修改下面三行内容，没有的话添加，有的话修改&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;net.bridge.bridge-nf-call-arptables=0
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;net.bridge.bridge-nf-call-ip6tables=0
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;net.bridge.bridge-nf-call-iptables=0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;vi /etc/sysctl.conf&lt;/code&gt; 检查和修改 ，没有的话添加，有的话修改 文件不存在的话创建，内容也是前面的三行&lt;/p&gt;
&lt;p&gt;验证&lt;code&gt;sysctl -p&lt;/code&gt; 输出内容应该也是这三行内容，检查无误后，重启sysctl&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/init.d/sysctl restart
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item></channel></rss>